// Prisma schema for Project Library
// Defines the database models and their relationships

generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "postgresql"
}

// User model for authentication and profiles (Milestone A & B)
model User {
	id             String    @id @default(cuid())
	email          String    @unique
	passwordHash   String    // bcrypt hashed password
	username       String    @unique
	name           String?
	headline       String?
	bio            String?
	interests      String[]  @default([]) // array of interest tags, optional
	location       String?
	createdAt      DateTime  @default(now())
	updatedAt      DateTime  @updatedAt

	projects       Project[] // projects owned by this user

	@@map("users")
}

// Project model for user-created projects (Milestone C)
// Enhanced with image support (Milestone E)
model Project {
	id             String    @id @default(cuid())
	title          String    // required project title
	description    String    // required project description
	tags           String[]  @default([]) // array of project tags, optional
	imageUrl       String?   // optional image URL/path for project image
	ownerId        String    // foreign key to User
	createdAt      DateTime  @default(now())
	updatedAt      DateTime  @updatedAt

	owner          User      @relation(fields: [ownerId], references: [id], onDelete: Cascade)

	@@map("projects")
}
